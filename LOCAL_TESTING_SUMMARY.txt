================================================================================
                   LOCAL TESTING - QUICK SUMMARY
================================================================================

TO GET STARTED, CHOOSE ONE:

1️⃣  FULL STACK (Recommended for first-time testing)
    ────────────────────────────────────────────────
    bash scripts/build-and-run.sh
    
    • Builds Docker images
    • Starts all services (PostgreSQL, Redis, MinIO, API, Worker, etc.)
    • Shows logs in real-time
    • Ready to test in 5 minutes
    
    Then access:
    - API: http://localhost:8080/health
    - MinIO: http://localhost:9001 (minio/minio123)
    - Grafana: http://localhost:3000 (admin/admin)


2️⃣  TESTS ONLY (Fast, no services)
    ────────────────────────────────
    bash scripts/run-tests-local.sh
    
    • Lint + TypeScript check
    • Unit tests
    • Integration tests
    • Cleans up after
    • Takes ~3-10 minutes


3️⃣  KUBERNETES (Full production-like environment)
    ──────────────────────────────────────────────
    bash scripts/setup-kind-cluster.sh
    
    • Requires: kind, kubectl (install with: brew install kind kubectl)
    • Creates local 3-node Kubernetes cluster
    • Deploys using kustomize
    • Full production-like testing
    • Takes ~10-15 minutes


================================================================================
                            MANUAL STEPS
================================================================================

If you prefer manual control:

Step 1: Build images
  docker build -t video-ingest-api:latest -f infra/docker/api.Dockerfile .
  docker build -t video-ingest-worker:latest -f infra/docker/worker.Dockerfile .

Step 2: Start stack
  docker-compose -f docker-compose.prod.yml up -d

Step 3: Check status
  docker-compose -f docker-compose.prod.yml ps

Step 4: View logs
  docker-compose -f docker-compose.prod.yml logs -f

Step 5: Test API
  curl http://localhost:8080/health

Step 6: Stop stack
  docker-compose -f docker-compose.prod.yml down


================================================================================
                         COMMON COMMANDS
================================================================================

View logs (all services)
  docker-compose -f docker-compose.prod.yml logs -f

View logs (API only)
  docker-compose -f docker-compose.prod.yml logs -f api

Connect to database
  docker-compose -f docker-compose.prod.yml exec postgres psql -U app -d video

Connect to Redis
  docker-compose -f docker-compose.prod.yml exec redis redis-cli

Run migrations
  docker-compose -f docker-compose.prod.yml exec api npm run prisma:migrate

Run tests
  docker-compose -f docker-compose.prod.yml exec api npm test

View container status
  docker ps
  docker stats

Cleanup everything
  docker-compose -f docker-compose.prod.yml down -v
  docker system prune -a


================================================================================
                         SERVICE URLS
================================================================================

API                 http://localhost:8080
API Docs            http://localhost:8080/api/docs (if available)
MinIO Console       http://localhost:9001       (user: minio, pass: minio123)
Prometheus          http://localhost:9090
Grafana             http://localhost:3000       (user: admin, pass: admin)
Jaeger              http://localhost:16686

PostgreSQL          localhost:5432              (user: app, pass: app)
Redis               localhost:6379


================================================================================
                      TROUBLESHOOTING
================================================================================

Docker won't start?
  docker ps
  
Port already in use?
  lsof -i :8080          (macOS/Linux)
  netstat -ano | findstr :8080  (Windows)

Container exiting with error?
  docker-compose -f docker-compose.prod.yml logs api

Out of disk space?
  docker system prune -a

Network connectivity?
  docker-compose -f docker-compose.prod.yml exec api curl http://postgres:5432


================================================================================
                      DOCUMENTATION
================================================================================

Quick reference:        QUICK_START.md
Full guide:             LOCAL_TESTING_COMPLETE.md
Docker Compose ref:     LOCAL_TESTING.md
Deployment pipeline:    DEPLOYMENT_PIPELINE.md
kubectl reference:      DEPLOYMENT_QUICK_REF.sh (run: bash DEPLOYMENT_QUICK_REF.sh)


================================================================================
                         NEXT STEPS
================================================================================

1. Run one of the three options above (start with #1 if unsure)
2. Verify everything is working (health check, logs, etc.)
3. Make code changes and test locally
4. When ready, commit & push to GitHub
5. GitHub Actions automatically tests and deploys


✓ Ready? Run: bash scripts/build-and-run.sh
